<ui:composition template="/templates/layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:define name="content">

        <h:form id="unitForm">

            <div class="unit-wrapper">

                <!-- LINKER BLOCK ====================================================== -->
                <div class="unit-left">

                    <h2>Einheitendaten</h2>

                    <table class="stats-table">
                        <tr><th>Eigenschaft</th><th>Wert</th></tr>

                        <tr>
                            <td>Angriffspunkte:</td>
                            <td>#{einheitBean.fullAP}
                                <span class="bonus">#{einheitBean.apBonusString}</span>
                            </td>
                        </tr>

                        <tr>
                            <td>Verteidigungspunkte:</td>
                            <td>#{einheitBean.fullVP}
                                <span class="bonus">#{einheitBean.vpBonusString}</span>
                            </td>
                        </tr>

                        <tr>
                            <td>Lebenspunkte:</td>
                            <td>#{einheitBean.fullHP}
                                <span class="bonus">#{einheitBean.hpBonusString}</span>
                            </td>
                        </tr>

                        <tr>
                            <td>Manapunkte:</td>
                            <td>#{einheitBean.fullMP}
                                <span class="bonus">#{einheitBean.mpBonusString}</span>
                            </td>
                        </tr>

                        <tr>
                            <td>Tragkraft:</td>
                            <td>#{einheitBean.fullTragkraft}</td>
                        </tr>
                    </table>

                    <!-- AUSRÜSTUNG --------------------------------------------------------------- -->
                    <h2>Ausrüstung</h2>

                    <div class="equipment-block">
                        <div>
                            <b>Waffe:</b>
                            <h:outputLink value="/pages/item.xhtml?id=#{einheitBean.waffeId}">
                                #{einheitBean.waffeName}
                            </h:outputLink>
                        </div>
                        <div>
                            <b>Schild:</b>
                            <h:outputLink value="/pages/item.xhtml?id=#{einheitBean.schildId}">
                                #{einheitBean.schildName}
                            </h:outputLink>
                        </div>
                        <div>
                            <b>Rüstung:</b>
                            <h:outputLink value="/pages/item.xhtml?id=#{einheitBean.ruestungId}">
                                #{einheitBean.ruestungName}
                            </h:outputLink>
                        </div>
                        <div>
                            <b>Helm:</b>
                            <h:outputLink value="/pages/item.xhtml?id=#{einheitBean.helmId}">
                                #{einheitBean.helmName}
                            </h:outputLink>
                        </div>
                        <div>
                            <b>Ring:</b>
                            <h:outputLink value="/pages/item.xhtml?id=#{einheitBean.ringId}">
                                #{einheitBean.ringName}
                            </h:outputLink>
                        </div>
                    </div>

                    <!-- ZAUBER ---------------------------------------------------------------- -->
                    <h2>Zauber</h2>
                    <div class="spell-block">
                        Primär: #{einheitBean.zauberName}<br/>
                        Sekundär: #{einheitBean.zauber2Name}
                    </div>

                </div>


                <!-- RECHTER BLOCK ==================================================== -->
                <div class="unit-right">

                    <h2>#{einheitBean.displayName}</h2>

                    <div class="unit-image-large">
                        <h:graphicImage name="images/units/#{einheitBean.pic}" />
                    </div>

                    <div class="unit-special-row">
                        <ui:repeat value="#{einheitBean.specialAbilities}" var="icon">
                            <h:graphicImage name="images/#{icon}" styleClass="big-icon"/>
                        </ui:repeat>
                    </div>

                    <div class="unit-amount-row">
                        Anzahl:
                        <p:spinner value="#{einheitBean.amount}" min="1" max="999"/>
                    </div>

                    <!-- KOSTEN BLOCK -->
                    <div class="unit-cost-panel">

                        <h3>Kosten</h3>

                        <div class="cost-item">
                            <h:graphicImage name="images/icons/20x20/erz.png"/>
                            <span><h:outputText value="#{einheitBean.costErz}"><f:convertNumber groupingUsed="true"/></h:outputText></span>
                        </div>
                        <div class="cost-item">
                            <h:graphicImage name="images/icons/20x20/gold.png"/>
                            <span><h:outputText value="#{einheitBean.costGold}"><f:convertNumber groupingUsed="true"/></h:outputText></span>
                        </div>
                        <div class="cost-item">
                            <h:graphicImage name="images/icons/20x20/holz.png"/>
                            <span><h:outputText value="#{einheitBean.costHolz}"><f:convertNumber groupingUsed="true"/></h:outputText></span>
                        </div>
                        <div class="cost-item">
                            <h:graphicImage name="images/icons/20x20/nahrung_f.png"/>
                            <span><h:outputText value="#{einheitBean.costNahrung}"><f:convertNumber groupingUsed="true"/></h:outputText></span>
                        </div>
                        <div class="cost-item">
                            <h:graphicImage name="images/icons/20x20/silber.png"/>
                            <span><h:outputText value="#{einheitBean.costSilber}"><f:convertNumber groupingUsed="true"/></h:outputText></span>
                        </div>

                        <div class="duration-row">
                            Dauer:
                            <span>#{einheitBean.durationFormatted}</span>
                        </div>

                    </div>

                    <p:commandButton value="Einheit ausbilden"
                                     icon="pi pi-check"
                                     action="#{einheitBean.trainUnit}"
                                     update="@form"
                                     styleClass="train-btn"/>

                    <p:commandButton value="Vorlage speichern"
                                     icon="pi pi-save"
                                     action="#{einheitBean.saveTemplate}"
                                     update="@form"
                                     styleClass="save-btn"/>

                </div>

            </div>

        </h:form>
    </ui:define>
</ui:composition>
